<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>App-Manager-Platform</title>
    <!-- vue-component -->
    <script th:src="@{/js/vue.js}"></script>
    <!-- minsx-style -->
    <link rel="stylesheet" th:href="@{/css/minsx.css}" type="text/css"/>
    <!-- element-ui-style -->
    <link rel="stylesheet" th:href="@{/theme/minsx/index.css}">
    <!-- element-ui-component -->
    <script th:src="@{/js/element.js}"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- requester -->
    <script th:src="@{/js/minsx-request.js}"></script>
</head>
<body>

<div id="app">
    <top-header></top-header>
    <top-menu active-index="1"></top-menu>
    <div id="section">

        <div class="top-bottom-interval-panel">
            <div class="elem-quote">
                说明：应用概览的相关说明
            </div>

            <el-card class="box-card" v-for="app in apps" :key="app.appName">
                <div slot="header" class="clearfix">
                    <span class="box-card-title">{{app.appName}}</span>
                    <span class="left-interval">状态 : <i class="el-icon-loading"></i></span>
                    <el-button class="float-right-button" type="warning">停止</el-button>
                    <el-button class="float-right-button" type="primary">重启</el-button>
                    <el-button class="float-right-button" type="success">开启</el-button>
                </div>

                <el-row :gutter="12">
                    <el-col :span="12">
                        <div class="grid-content bg-purple">启动命令 : {{app.command | d}}</div>
                    </el-col>
                    <el-col :span="12">
                        <div class="grid-content bg-purple">环境变量 : {{app.environments | d}}</div>
                    </el-col>
                </el-row>
                <el-row :gutter="12">
                    <el-col :span="12">
                        <div class="grid-content bg-purple">运行路径 : {{app.inPath | d}}</div>
                    </el-col>
                    <el-col :span="12">
                        <div class="grid-content bg-purple">运行编码 : {{app.charset | d}}</div>
                    </el-col>
                </el-row>
                <el-row :gutter="12">
                    <el-col :span="12">
                        <div class="grid-content bg-purple">缓存长度 : {{app.bufferLength | d}}</div>
                    </el-col>
                    <el-col :span="12">
                        <div class="grid-content bg-purple">异常终止 : {{app.stopOnErr | b}}</div>
                    </el-col>
                </el-row>
                <el-row :gutter="12">
                    <el-col :span="12">
                        <div class="grid-content bg-purple">开始时间 : {{app.beginDateTime | d}}</div>
                    </el-col>
                    <el-col :span="12">
                        <div class="grid-content bg-purple">结束时间 : {{app.endDateTime | d}}</div>
                    </el-col>
                </el-row>
            </el-card>
        </div>

    </div>
    <bottom-footer></bottom-footer>
</div>

<script th:src="@{/component/top-menu.js}"></script>
<script th:src="@{/component/top-header.js}"></script>
<script th:src="@{/component/bottom-footer.js}"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            apps: {},
            message: 'App-Manager-Platform!'
        },
        filters: {
            b: function (flag) {
                return flag ? '是' : '否';
            },
            d: function (value) {
                return value || '暂无数据';
            }
        },
        methods: {
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            getApps() {
                MinsxRequest.get("/app/listApps").then(response => {
                    if (response.status === 200) {
                        this.apps = response.data;
                    }
                }).catch(error => {
                });
            }
        },
        created: function () {
            this.getApps();
        }
    });

</script>
</body>
</html>